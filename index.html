<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç—ã –ø–æ –∞—Ä—Ç-—Ñ–µ—Ö—Ç–æ–≤–∞–Ω–∏—é</title>
    <script src="https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app">
        <!-- –≠–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ -->
        <div id="loading-screen" class="screen active">
            <div class="loading-content">
                <div class="loading-spinner" id="loading-spinner"></div>
                <h2>–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç–æ–≤...</h2>
                <p id="loading-error" style="display: none; color: #ff6b6b;">
                    –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ç–µ—Å—Ç—ã. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É.
                </p>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ —Ç–µ—Å—Ç–∞ -->
        <div id="test-selection-screen" class="screen">
            <div class="header">
                <h1>‚öîÔ∏è –¢–µ—Å—Ç—ã –ø–æ –∞—Ä—Ç-—Ñ–µ—Ö—Ç–æ–≤–∞–Ω–∏—é</h1>
                <p>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–Ω–∞–Ω–∏–π</p>
            </div>
            <div class="content">
                <div class="selection-actions">
                    <button class="vk-button secondary" onclick="refreshTests()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫</button>
                    <button class="vk-button secondary" onclick="showAdminPanel()">üë®‚Äçüíº –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</button>
                </div>
                <div id="tests-container" class="tests-container">
                    <!-- –¢–µ—Å—Ç—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è -->
        <div id="welcome-screen" class="screen">
            <div class="header">
                <h1 id="welcome-test-title">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞</h1>
                <p>–ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ—Å—å –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é</p>
            </div>
            <div class="content">
                <div class="info-card">
                    <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ—Å—Ç–µ:</h3>
                    <ul>
                        <li>üìù <strong id="welcome-test-description">–û–ø–∏—Å–∞–Ω–∏–µ</strong></li>
                        <li>üéØ –°–ª–æ–∂–Ω–æ—Å—Ç—å: <span id="welcome-test-difficulty">-</span></li>
                        <li>‚è± –í—Ä–µ–º—è: <span id="welcome-test-duration">-</span></li>
                        <li>‚ùì –í–æ–ø—Ä–æ—Å–æ–≤: <span id="welcome-test-questions">-</span></li>
                        <li>üë§ –ê–≤—Ç–æ—Ä: <span id="welcome-test-author">-</span></li>
                    </ul>
                </div>
                <button class="vk-button" onclick="startTest()">–ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç</button>
                <button class="vk-button secondary" onclick="showScreen('test-selection')">‚Üê –í—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–æ–π —Ç–µ—Å—Ç</button>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω —Ç–µ—Å—Ç–∞ -->
        <div id="test-screen" class="screen">
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <span class="progress-text" id="progress-text">1/30</span>
            </div>
            
            <div class="question-card">
                <h2 id="question-text"></h2>
                <div id="answers-container" class="answers-container"></div>
                
                <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –æ–±—ä—è—Å–Ω–µ–Ω–∏—è (—Ç–æ–ª—å–∫–æ –¥–ª—è –æ–±—É—á–∞—é—â–µ–≥–æ —Ä–µ–∂–∏–º–∞) -->
                <div id="explanation-container" class="explanation-container" style="display: none;">
                    <div class="explanation-header">
                        <h3>üí° –û–±—ä—è—Å–Ω–µ–Ω–∏–µ</h3>
                    </div>
                    <p id="explanation-text"></p>
                </div>
            </div>
            
            <div class="test-actions">
                <button class="vk-button" id="next-button" onclick="nextQuestion()" disabled>–î–∞–ª–µ–µ</button>
                <button class="vk-button secondary" onclick="finishTestEarly()">–ó–∞–≤–µ—Ä—à–∏—Ç—å —Ç–µ—Å—Ç</button>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ -->
        <div id="result-screen" class="screen">
            <div class="result-header">
                <h1>üéâ –¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω!</h1>
                <p id="test-title">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞</p>
            </div>
            <div class="result-card">
                <div class="score-circle" id="score-circle">
                    <span id="score-percent">0%</span>
                </div>
                <h3>–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç</h3>
                <p id="result-text"></p>
                <div class="result-details">
                    <div class="stat">
                        <span class="stat-value" id="correct-answers">0</span>
                        <span class="stat-label">–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value" id="total-questions">0</span>
                        <span class="stat-label">–í—Å–µ–≥–æ –≤–æ–ø—Ä–æ—Å–æ–≤</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value" id="time-spent">0:00</span>
                        <span class="stat-label">–ó–∞—Ç—Ä–∞—á–µ–Ω–æ –≤—Ä–µ–º–µ–Ω–∏</span>
                    </div>
                </div>
            </div>
            <button class="vk-button" onclick="restartTest()">–í—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–æ–π —Ç–µ—Å—Ç</button>
            <button class="vk-button secondary" onclick="shareResult()">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º</button>
            <button class="vk-button secondary" onclick="showAdminPanel()">–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</button>
        </div>

        <!-- –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å -->
        <div id="admin-screen" class="screen">
            <div class="admin-header">
                <h1>üìä –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h1>
                <button class="vk-button secondary" onclick="showScreen('test-selection')">‚Üê –ù–∞–∑–∞–¥ –∫ —Ç–µ—Å—Ç–∞–º</button>
            </div>
            
            <div class="admin-stats">
                <div class="stat-card">
                    <h3>–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-number" id="total-tests">0</div>
                            <div class="stat-label">–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="average-score">0%</div>
                            <div class="stat-label">–°—Ä–µ–¥–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç</div>
                        </div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–µ—Å—Ç–∞–º</h3>
                    <div id="test-stats" class="test-stats">
                        <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
                    </div>
                </div>
                
                <div class="stat-card">
                    <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π</h3>
                    <div class="admin-actions">
                        <button class="vk-button" onclick="exportResults()">üìä –≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</button>
                        <button class="vk-button secondary" onclick="showTestManagement()">üìÅ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞–º–∏</button>
                        <button class="vk-button secondary" onclick="clearResults()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</button>
                    </div>
                </div>
                
                <div class="stat-card">
                    <h3>–õ—É—á—à–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</h3>
                    <div id="best-results" class="results-list">
                        <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
                    </div>
                </div>
                
                <div class="stat-card">
                    <h3>–í—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</h3>
                    <div id="all-results" class="results-list">
                        <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
                    </div>
                </div>
            </div>
        </div>

        <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ—Å—Ç–∞–º–∏ -->
        <div id="test-management-screen" class="screen">
            <div class="admin-header">
                <h1>üìÅ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞–º–∏</h1>
                <button class="vk-button secondary" onclick="showScreen('admin')">‚Üê –ù–∞–∑–∞–¥ –∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ</button>
            </div>
            
            <div class="admin-stats">
                <div class="stat-card">
                    <h3>–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç–æ–≤</h3>
                    <div class="test-management-actions">
                        <button class="vk-button" onclick="uploadTest()">üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ —Ñ–∞–π–ª–∞</button>
                        <button class="vk-button" onclick="uploadTestFromUrl()">üåê –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø–æ URL</button>
                        <button class="vk-button secondary" onclick="createNewTest()">‚ûï –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π</button>
                    </div>
                    <p class="help-text">–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è JSON —Ñ–∞–π–ª—ã —Å —Ç–µ—Å—Ç–∞–º–∏ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ</p>
                </div>
                
                <div class="stat-card">
                    <h3>–ú–æ–∏ —Ç–µ—Å—Ç—ã</h3>
                    <div id="custom-tests-list" class="custom-tests-list">
                        <!-- –°–ø–∏—Å–æ–∫ —Ç–µ—Å—Ç–æ–≤ –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
                    </div>
                </div>
                
                <div class="stat-card">
                    <h3>–§–æ—Ä–º–∞—Ç —Ç–µ—Å—Ç–∞</h3>
                    <div class="format-example">
                        <pre><code>{
  "title": "–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞",
  "description": "–û–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞",
  "mode": "exam", // –∏–ª–∏ "tutorial" –¥–ª—è –æ–±—É—á–∞—é—â–µ–≥–æ —Ä–µ–∂–∏–º–∞
  "questions": [
    {
      "id": 1,
      "question": "–¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞",
      "type": "single",
      "answers": ["–û—Ç–≤–µ—Ç 1", "–û—Ç–≤–µ—Ç 2", ...],
      "correct": 0,
      "explanation": "–ü–æ—è—Å–Ω–µ–Ω–∏–µ"
    }
  ],
  "scoring": {
    "excellent": 80,
    "good": 60,
    "satisfactory": 40
  }
}</code></pre>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="testLoader.js"></script>
    <script src="app.js"></script>
</body>
</html>
